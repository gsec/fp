%%% For Windows/MikTex
%%% Put me into C:\Program Files\MiKTeX 2.9\tex\latex\bijan\
%%% Go to MikTex Options -> Refresh FNDB, Update Formats

%%% For Linux with Texlive vanilla setup
%%% Put me into /usr/local/texlive/texmf-local/tex/latex/local
%%% 'sudo texhash' to let LaTeX know of the new stylefile.
%%% use:    kpsewhich -var-value=TEXMFHOME 
%%% to determine the correct directory if above path does not work
\NeedsTeXFormat{LaTeX2e} 
\ProvidesPackage{bijan_commands} 

%%%%%%%%%%%%%%%%%%%%%% Mathematics %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\DeclareMathOperator{\asinh}{asinh}
\DeclareMathOperator{\acosh}{acosh}
\DeclareMathOperator{\atanh}{atanh}
\DeclareMathOperator{\Li}   {Li}

\newcommand\Tr[1]       {\T{Tr}\left[ #1 \right] }
\newcommand\scalprod[2] { \,#1\hspace{-.1em}\cdot\hspace{-.1em}#2\, }
\newcommand\pder[3][]   {\ems{ \frac{\del^{#1} #2}{\del #3^{#1}} }}
\newcommand\tder[2]     {\ems{\frac{\D #1}{\D #2}}}
\newcommand\Int[1]      {\int #1\:}

\renewcommand{\vec}[1]{\ems{\boldsymbol{#1} }}
\newcommand{\norm}[1] {\ems{\left\lVert #1 \right\rVert }}
\newcommand{\abs}[1]  {\ems{\left\lvert #1 \right\rvert }}
\newcommand{\mean}[1] {\ems{\left< #1 \right>}}
\newcommand{\order}[1]{\ems{\mathcal{O}\left(#1\right)}}

%%%%%%%%%%%%%%%%%%%%%% Physics %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\ket}[1]{\ems{\left| #1 \right> }}
\newcommand{\bra}[1]{\ems{\left< #1 \right| }}
\newcommand{\braket}[2]{\ems{\bra{#1\vphantom{#2}\,}\left.\vphantom{#1}#2\right> }}
\newcommand{\ketbra}[2]{\ems{\ket{#1\vphantom{#2}}\bra{#2\vphantom{#1}}}}
\newcommand{\braketop}[3]{\ems{\bra{#1\vphantom{#2 #3}\,}#2\ket{#3\vphantom{#1 #2}} }}

\newcommand{\comm}[2]{\ems{\left[#1,#2\right] }}
\newcommand{\anticomm}[2]{\ems{\left[ #1 , #2 \right]_+ }}
\newcommand{\BF}{\genfrac{}{}{0pt}{}{B}{F} }              % Boson-Fermion

%%%%%%%%%%%%%%%%%%%%%% Drawings %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand*\circled[1]{
  \tikz[baseline=(char.base)]{
  \node[shape=circle,draw,inner sep=1pt] (char) {#1};
  }
}
\newcommand{\uuline}[1]{\ems{\underline{\underline{#1}} }}
\newcommand{\scontract}[2]{\bcontraction{}{#1}{}{#2}#1#2} % Simple contraction

%%%%%%%%%%%%%%%%%%%%%% Fermion propagators  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% You can use \Slash p- to put a minus in front of p. Last argument is the mass.
% You have to supply the propagator with the sign \fermpropp{p}{q-}{m}.
% Enter indexed impulses with a space: \fermprop{q _2}{m}.
\def\Slash#1#2 {\ems{#2 \slashed{#1} }}
\def\Flip#1#2 {#2 #1 }

\newcommand\fermprop[2]{\ems{
    \frac{\I}{ \Slash #1 - #2 } }
}
\newcommand\fermProp[2]{\ems{
    \frac{\I\left( \Slash #1 + #2\right) }{( \Flip #1 )^2-#2^2 } }
}
\newcommand\fermpropp[3]{\ems{
    \frac{\I}{\Slash #1 \Slash #2 - #3 } }
} 
\newcommand\fermPropp[3]{\ems{
    \frac{\I\left(\Slash #1 \Slash #2 + #3\right) }{\left(#1 \Flip #2 \right)^2-#3^2 } }
}

%%%%%%%%%%%%%%%%%%%%% Shorthand notations %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand\Rcite[1]{Ref.~\cite{#1}}
\newcommand\no {\notag \\ }
\newcommand\with {\quad\T{with}\quad} 
\newcommand{\ems}[1]{\ensuremath{#1}}
\newcommand{\T}[1]{\text{#1}}
\newcommand\po{\;.}
\newcommand\co{\;,}

\newcommand{\del}{\partial}
\newcommand{\E}{\ems{\T e}}
\newcommand{\I}{\ems{\T i}}
\newcommand{\D}{\ems{\T d}}
\newcommand{\1}{\mathbbm 1}
\newcommand{\nfrac}[2]{\ems{\nicefrac{#1}{#2}}}
\newcommand\Sp\scalprod

\newcommand\lrA {\ems{\leftrightarrow}}
\newcommand\LrA {\ems{\Leftrightarrow}}
\newcommand\rA  {\ems{\rightarrow}}
\newcommand\RA  {\ems{\Rightarrow}}
\newcommand\lA  {\ems{\leftarrow }}
\newcommand\LA  {\ems{\Leftarrow }}
\newcommand\up  {\ems{\uparrow}}
\newcommand\down{\ems{\downarrow}}
\newcommand\Up  {\ems{\Uparrow}}
\newcommand\Down{\ems{\Downarrow}}

\newcommand\Al {\bigl}
\newcommand\Ar {\bigr}
\newcommand\Bl {\Bigl}
\newcommand\Br {\Bigr}
\newcommand\Cl {\biggl}
\newcommand\Cr {\biggr}
\newcommand\Dl {\Biggl}
\newcommand\Dr {\Biggr}

\newcommand\ham   {\ems{\mathcal H}}
\newcommand\lag   {\ems{\mathcal L}}
\newcommand\polM  {\ems{\mathcal{\tilde M}}}
\newcommand\unpolM{\ems{\mathcal{M}}}
\newcommand\PS    {\ems{\mathcal P}}
\newcommand\Sl[1] {\ems{\slashed{#1}}}

\newcommand\sw  {\ems{\T s_W}}
\newcommand\cw  {\ems{\T c_W}}
\newcommand\as  {\ems{\alpha_S}}
\newcommand\Mv  {\ems{m_V}}
\newcommand\Mw  {\ems{m_W}}
\newcommand\Mz  {\ems{m_Z}}
\newcommand\Me  {\ems{m_e}}
\newcommand\Mmu {\ems{m_\mu}}  
\newcommand\Mtau{\ems{m_\tau}}
\newcommand\Mu  {\ems{m_u}}
\newcommand\Md  {\ems{m_d}}
\newcommand\Ms  {\ems{m_s}}
\newcommand\Mc  {\ems{m_c}}
\newcommand\Mb  {\ems{m_b}}
\newcommand\Mt  {\ems{m_t}}
\newcommand\Mh  {\ems{m_H}}

%%%%%%%%%%%%%%%%%%%%%% Environments %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\newenvironment{esplit}{\begin{equation}\begin{split}}{\end{split}\end{equation}}

\newcommand{\mathnote}[1]{\ensuremath{\mbox{\smaller[1] $#1$}}}
\newenvironment{note}{\par\begingroup\vspace{.5em}\hrule\leftskip=1cm\sf}
{\par\vspace{.5em}\hrule\endgroup}

%%%%%%%%%%%%%%%%%%%%%% Automatic generation of feynmangraphs %%%%%%%%%%%%%%%%%%%

\makeatletter
\def\endfmffile{%
  \fmfcmd{\p@rcent\space the end.^^J%
          end.^^J%
          endinput;}%
  \if@fmfio
    \immediate\closeout\@outfmf
  \fi
  \ifnum\pdfshellescape=\@ne
    \immediate\write18{cd Feynmp;mpost \thefmffile}%
  \fi}
\makeatother

\endinput
